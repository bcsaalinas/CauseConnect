<%- include('layout/header', { title, extraCss }) %>

<section class="py-5 text-center container">
  <div class="row py-lg-4">
    <div class="col-lg-8 col-md-10 mx-auto">
      <h1 class="fw-bold">NGO Directory</h1>
      <p class="lead text-muted">Discover organizations by cause and location. Use the filters to quickly find who to support.</p>

      <form class="mt-3" method="GET" action="/ngos">
        <div class="row g-2 justify-content-center">
          <div class="col-12 col-md-5">
            <input class="form-control" type="text" name="q" placeholder="Search by name..." value="<%= q || '' %>"/>
          </div>
          <div class="col-6 col-md-3">
            <select class="form-select" name="cause">
              <option value="">Select cause</option>
              <option value="Education" <%= cause==='Education'?'selected':'' %>>Education</option>
              <option value="Environment" <%= cause==='Environment'?'selected':'' %>>Environment</option>
              <option value="Health" <%= cause==='Health'?'selected':'' %>>Health</option>
            </select>
          </div>
          <div class="col-6 col-md-3">
            <select class="form-select" name="location">
              <option value="">Select location</option>
              <option value="Guadalajara" <%= location==='Guadalajara'?'selected':'' %>>Guadalajara</option>
              <option value="Zapopan" <%= location==='Zapopan'?'selected':'' %>>Zapopan</option>
              <option value="Tlaquepaque" <%= location==='Tlaquepaque'?'selected':'' %>>Tlaquepaque</option>
              <option value="Jalisco" <%= location==='Jalisco'?'selected':'' %>>Regional / Jalisco</option>
            </select>
          </div>
          <div class="col-12 col-md-1 d-grid">
            <button type="submit" class="btn btn-pill btn-pill-primary">Search</button>
          </div>
        </div>
      </form>
    </div>
  </div>
</section>

<div class="album py-3 bg-light">
  <div class="container">
    <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3">
      <% ngos.forEach(item => { %>
        <div class="col">
          <div class="card shadow-sm h-100">
            <div class="card-body">
              <h5 class="card-title mb-1"><%= item.name %></h5>
              <p class="card-text text-muted small mb-2">
                <%= item.cause %> â€¢ <%= item.location %>
              </p>
              <p class="card-text"><%= item.blurb %></p>
            </div>
            <div class="card-footer bg-transparent border-0 pt-0 pb-3 px-3">
              <div class="d-flex justify-content-between align-items-center">
                <a href="<%= item.website %>" target="_blank" class="btn btn-sm btn-outline-secondary">Website</a>
                <span class="text-muted small"><%= item.contact || '' %></span>
              </div>
            </div>
          </div>
        </div>
      <% }) %>
    </div>
  </div>
</div>

<%- include('layout/footer') %>
